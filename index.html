<html>
  <head>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js'></script>

  </head>
  <body>
    <script>
      const loadData = async()=> {
        const urls = [
          'https://acme-users-api-rev.herokuapp.com/api/companies',
          'https://acme-users-api-rev.herokuapp.com/api/products',
          'https://acme-users-api-rev.herokuapp.com/api/offerings'
        ];
        const responses = await Promise.all(urls.map( url => axios.get(url)));
        const [ companies, products, offerings ] = responses.map( response => response.data);
        // write functions below

        //return products within a price range
        const findProductsInPriceRange = (products, { min, max }) => {
          return products.filter(product => product.suggestedPrice >= min && product.suggestedPrice <= max)
        };

        const productsInPriceRange = findProductsInPriceRange(products, {min: 1, max: 15});
        console.log('productsInPriceRange', productsInPriceRange);

        //returns object where key is first letter of company name
        //value for each key is the array of those companies in that state
        const groupCompaniesByLetter = (companies) => {
          return companies.reduce((acc, company)=>{
            const key = company.name[0];
            if (!(key in acc)) {
              acc[key] = [company]; //want company obj? or company.name?
            }
            else {
              acc[key].push(company)
            }
            return acc;
          },{})
        };

        const groupedCompaniesByLetter = groupCompaniesByLetter(companies);
        console.log('groupedCompaniesByLetter', groupedCompaniesByLetter);
      };

      loadData();
    </script>
  </body>
</html>
